# 2455. 合法三元组的个数 
给定三个数组 A,B,C，以及一个非负整数 d。

求共有多少个三元组 (i,j,k)，满足：|Ai−Bj|≤d,|Ai−Ck|≤d,|Bj−Ck|≤d。

## 输入格式

第一行包含四个整数 lA,lB,lC,d，分别表示数组 A,B,C的长度以及给定非负整数。

第二行包含 lA个整数 A0,A1,…,AlA−1，用来描述数组 A。

第三行包含 lB个整数 B0,B1,…,BlB−1，用来描述数组 B。

第四行包含 lC个整数 C0,C1,…,ClC−1，用来描述数组 C。

## 输出格式

输出一个整数，用来表示满足条件的三元组的个数。

## 数据范围
```
1≤lA,lB,lC≤105,0≤d≤109,三个数组中的元素的取值范围为 [−109,109]。
```

## 输入样例：

```javascript
3 3 3 2
1 3 5
2 4 6
3 5 7
```

输出样例：
```javascript
8
```

## 备注

> 滑动窗口算法可以用以**解决数组/字符串**的子元素问题，它可以将**嵌套的循环问题**，转换为**单循环问题**，**降低时间复杂度**。

```javascript
// 输入：arr [] = {100,200,300,400}
//  k = 2

// 输出：700

// 解释：300 + 400 = 700
function maxSum(arr, k) {
  const n = arr.length
  let maxSum = Number.MIN_SAFE_INTEGER;

  for (let i = 0; i < n - k + 1; i++) {
    let currentSum = 0;
    for (let j = 0; j < k; j++) {
      currentSum = currentSum + arr[i + j];
    }

    maxSum = Math.max(currentSum, maxSum);
  }

  return maxSum;
}

// 因为包含两个 for 循环，它的时间复杂度是 O（k * n）。
```

```javascript
/**
 * 
 * 滑动窗口算法
 * 
 * 滑动窗口算法可以将嵌套的循环问题，转换为单循环问题，降低时间复杂度。
 * 
 * 根据示例，当 k 等于 2 时，我们维护一个长度为 2 的窗口。
 * 
 * 
 * 窗口内的值的和保存在一个变量中；
 * 通过不断的往右滑动来算出当前窗口的值，并与保存的最大值作比较；
 * 当窗口滑动到最右边时终止滑动；
 * 
 * 
*/
function maxSum(arr, k) {
  const n = arr.length;
  if (n < k) {
    return -1;
  }

  // 计算出第一个窗口的值
  let maxSum = 0;
  for (let i = 0; i < k; i++) {
    maxSum += arr[i];
  }

  let sum = maxSum;
  for (let i = k; i < n; i++) {
    // 新窗口的和 = 前一个窗口的和 + 新进入窗口的值 - 移出窗口的值
    sum += arr[i] - arr[i - k];
    maxSum = Math.max(maxSum, sum);
  }

  return maxSum;
}

// 我们在一个循环中计算出了长度为 'k' 的子数组的最大总和，它的时间复杂度是 O（n）。我们可以使用滑动窗口算法解决 查找最大/最小k子阵列，XOR，乘积，求和等问题。
```

> 滑窗 O(n)。
> 根据题意可知 三元组的最大元素和最小元素之差为d，可以将所有元素放到一个数组里。
> 维护一个窗口大小为d的窗口，每次答案增加 窗口中属于**a的个数**`*`**属于b的个数**`*`**属于c的个数**。
> 需要注意在窗口滑动过程中会出现重复计算，例如第一次窗口为[0,6] 第二次窗口为[3,7]，那么[3,6]这段会被重复计算，需要减去。